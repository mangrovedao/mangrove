<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@mangrovedao/mangrove.js</title><meta name="description" content="Documentation for @mangrovedao/mangrove.js"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@mangrovedao/mangrove.js</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>@mangrovedao/mangrove.js </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#mangrovejs" id="mangrovejs" style="color: inherit; text-decoration: none;">
  <h1>mangrove.js</h1>
</a>
<p>A JavaScript library for Mangrove. Wraps around <a href="https://github.com/ethers-io/ethers.js/">Ethers.js</a>. Works in the <strong>web browser</strong> and <strong>Node.js</strong>.</p>
<p>This SDK is in <strong>open beta</strong>, and is constantly under development. <strong>USE AT YOUR OWN RISK</strong>.</p>

<a href="#install--import" id="install--import" style="color: inherit; text-decoration: none;">
  <h2>Install / Import</h2>
</a>

<a href="#web-browser" id="web-browser" style="color: inherit; text-decoration: none;">
  <h3>Web Browser</h3>
</a>
<pre><code class="language-html"><span class="hl-0">&lt;</span><span class="hl-1">script</span><br/><span class="hl-2">  </span><span class="hl-3">type</span><span class="hl-2">=</span><span class="hl-4">&quot;text/javascript&quot;</span><br/><span class="hl-2">  </span><span class="hl-3">src</span><span class="hl-2">=</span><span class="hl-4">&quot;https://cdn.jsdelivr.net/npm/@mangrovedao/mangrove.js&quot;</span><br/><span class="hl-0">&gt;&lt;/</span><span class="hl-1">script</span><span class="hl-0">&gt;</span><br/><br/><span class="hl-0">&lt;</span><span class="hl-1">script</span><span class="hl-2"> </span><span class="hl-3">type</span><span class="hl-2">=</span><span class="hl-4">&quot;text/javascript&quot;</span><span class="hl-0">&gt;</span><br/><span class="hl-2">  </span><span class="hl-5">Mangrove</span><span class="hl-2">.(</span><span class="hl-6">...</span><span class="hl-2">)</span><br/><span class="hl-0">&lt;/</span><span class="hl-1">script</span><span class="hl-0">&gt;</span>
</code></pre>

<a href="#nodejs" id="nodejs" style="color: inherit; text-decoration: none;">
  <h3>Node.js</h3>
</a>
<pre><code><span class="hl-5">npm</span><span class="hl-6"> </span><span class="hl-5">install</span><span class="hl-6"> @</span><span class="hl-5">mangrovedao</span><span class="hl-6">/</span><span class="hl-5">mangrove</span><span class="hl-6">.</span><span class="hl-5">js</span>
</code></pre>
<pre><code class="language-js"><span class="hl-7">const</span><span class="hl-6"> { </span><span class="hl-8">Mangrove</span><span class="hl-6"> } = </span><span class="hl-9">require</span><span class="hl-6">(</span><span class="hl-10">&quot;...&quot;</span><span class="hl-6">); </span><span class="hl-11">// cjs</span><br/><span class="hl-12">import</span><span class="hl-6"> { </span><span class="hl-5">Mangrove</span><span class="hl-6"> } </span><span class="hl-12">from</span><span class="hl-6"> </span><span class="hl-10">&quot;...&quot;</span><span class="hl-6">; </span><span class="hl-11">// or using ES6</span>
</code></pre>

<a href="#using-the-api-as-a-liquidity-taker" id="using-the-api-as-a-liquidity-taker" style="color: inherit; text-decoration: none;">
  <h1>Using the API as a liquidity taker</h1>
</a>

<a href="#connecting-the-api-to-a-deployed-mangrove-contract" id="connecting-the-api-to-a-deployed-mangrove-contract" style="color: inherit; text-decoration: none;">
  <h2>Connecting the API to a deployed Mangrove contract</h2>
</a>
<pre><code class="language-js"><span class="hl-11">// use alchemy or infura to connect to the network</span><br/><span class="hl-7">const</span><span class="hl-6"> </span><span class="hl-8">mgv</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">Mangrove</span><span class="hl-6">.</span><span class="hl-9">connect</span><span class="hl-6">({</span><br/><span class="hl-6">  </span><span class="hl-5">provider:</span><span class="hl-6"> </span><span class="hl-5">process</span><span class="hl-6">.</span><span class="hl-5">env</span><span class="hl-6">.</span><span class="hl-8">NODE_URL</span><span class="hl-6">,</span><br/><span class="hl-6">  </span><span class="hl-5">privateKey:</span><span class="hl-6"> </span><span class="hl-5">process</span><span class="hl-6">.</span><span class="hl-5">env</span><span class="hl-6">.</span><span class="hl-8">SK</span><span class="hl-6">,</span><br/><span class="hl-6">});</span>
</code></pre>

<a href="#obtaining-a-market-object" id="obtaining-a-market-object" style="color: inherit; text-decoration: none;">
  <h2>Obtaining a market object</h2>
</a>
<pre><code class="language-js"><span class="hl-6">  </span><span class="hl-11">// Connect to ETH-USDC market</span><br/><span class="hl-6">  </span><span class="hl-7">const</span><span class="hl-6"> </span><span class="hl-8">market</span><span class="hl-6"> = </span><span class="hl-5">mgv</span><span class="hl-6">.</span><span class="hl-9">market</span><span class="hl-6">({ </span><span class="hl-5">base:</span><span class="hl-6"> </span><span class="hl-10">&quot;ETH&quot;</span><span class="hl-6">, </span><span class="hl-5">quote:</span><span class="hl-6"> </span><span class="hl-10">&quot;USDC&quot;</span><span class="hl-6"> });</span><br/><br/><span class="hl-6">  </span><span class="hl-11">// Check allowance</span><br/><span class="hl-6">  </span><span class="hl-7">const</span><span class="hl-6"> </span><span class="hl-8">allowance</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">market</span><span class="hl-6">.</span><span class="hl-5">base</span><span class="hl-6">.</span><span class="hl-9">allowance</span><span class="hl-6">(); </span><span class="hl-11">// by default returns Mangrove allowance for current signer address</span><br/><span class="hl-6">  </span><span class="hl-11">// Set max allowance for Mangrove spending quote tokens on behalf of signer</span><br/><span class="hl-6">  </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">market</span><span class="hl-6">.</span><span class="hl-5">quote</span><span class="hl-6">.</span><span class="hl-9">approveMangrove</span><span class="hl-6">();</span><br/><span class="hl-6">  </span><span class="hl-11">// Set specific allowance</span><br/><span class="hl-6">  </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">market</span><span class="hl-6">.</span><span class="hl-5">base</span><span class="hl-6">.</span><span class="hl-9">approveMangrove</span><span class="hl-6">(</span><span class="hl-13">0.42</span><span class="hl-6">);</span><br/><br/><span class="hl-6">    </span><span class="hl-11">// Read orderbook</span><br/><span class="hl-6">  </span><span class="hl-5">market</span><span class="hl-6">.</span><span class="hl-9">book</span><span class="hl-6">();</span><br/><span class="hl-6">  </span><span class="hl-11">/*</span><br/><span class="hl-11">    Returns</span><br/><span class="hl-11">    {</span><br/><span class="hl-11">      asks: [</span><br/><span class="hl-11">        {id: 3, price: 3700, volume: 4, ...},</span><br/><span class="hl-11">        {id: 56, price: 3701, volume: 7.12, ...}</span><br/><span class="hl-11">      ],</span><br/><span class="hl-11">      bids: [</span><br/><span class="hl-11">        {id: 811, price: 3600, volume: 1.23, ...},</span><br/><span class="hl-11">        {id: 80, price: 3550, volume: 1.11, ...}</span><br/><span class="hl-11">      ]</span><br/><span class="hl-11">    }</span><br/><span class="hl-11">  */</span><br/><span class="hl-6"> </span><span class="hl-11">// pretty printing to console</span><br/><span class="hl-6"> </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">market</span><span class="hl-6">.</span><span class="hl-9">consoleAsks</span><span class="hl-6">();</span><br/><span class="hl-6"> </span><span class="hl-11">/*</span><br/><span class="hl-11"> prints by default</span><br/><span class="hl-11">┌─────────┬─────┬──────────────────────────────────────────────┬────────────────────┬────────────────────────┐</span><br/><span class="hl-11">│ (index) │ id  │                    maker                     │       volume       │         price          │</span><br/><span class="hl-11">├─────────┼─────┼──────────────────────────────────────────────┼────────────────────┼────────────────────────┤</span><br/><span class="hl-11">│    0    │ 63  │ &#39;0xcBb37575320FF499E9F69d0090b6944bc0aD7585&#39; │        1000        │          1.01          │</span><br/><span class="hl-11">│    1    │ 82  │ &#39;0x3073A02460D7BE1A1C9afC60A059Ad8d788A4502&#39; │ 6.661453068436484  │ 1.01007136594287569481 │</span><br/><span class="hl-11">│    2    │ 152 │ &#39;0x3073A02460D7BE1A1C9afC60A059Ad8d788A4502&#39; │ 2.5010075605785964 │ 1.01008930953234142236 │</span><br/><span class="hl-11">│    3    │ 123 │ &#39;0x3073A02460D7BE1A1C9afC60A059Ad8d788A4502&#39; │ 8.931944047363888  │ 1.01028129510766635908 │</span><br/><span class="hl-11">│    4    │ 140 │ &#39;0x3073A02460D7BE1A1C9afC60A059Ad8d788A4502&#39; │ 3.6346162334836647 │ 1.01073119251408598466 │</span><br/><span class="hl-11">└─────────┴─────┴──────────────────────────────────────────────┴────────────────────┴────────────────────────┘</span><br/><span class="hl-11"> */</span><br/><span class="hl-11">// Apply filter using</span><br/><span class="hl-7">const</span><span class="hl-6"> </span><span class="hl-8">filter</span><span class="hl-6"> = [</span><span class="hl-10">&quot;id&quot;</span><span class="hl-6">, </span><span class="hl-10">&quot;wants&quot;</span><span class="hl-6">, </span><span class="hl-10">&quot;gives&quot;</span><span class="hl-6">, </span><span class="hl-10">&quot;gasprice&quot;</span><span class="hl-6">, </span><span class="hl-10">&quot;maker&quot;</span><span class="hl-6">];</span><br/><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">market</span><span class="hl-6">.</span><span class="hl-9">consoleAsks</span><span class="hl-6">(</span><span class="hl-5">filter</span><span class="hl-6">);</span><br/><br/><span class="hl-11">// Subscribe to orderbook</span><br/><span class="hl-5">market</span><span class="hl-6">.</span><span class="hl-9">subscribe</span><span class="hl-6">((</span><span class="hl-5">event</span><span class="hl-6">) </span><span class="hl-7">=&gt;</span><span class="hl-6"> {</span><br/><span class="hl-6">  </span><span class="hl-11">/* `event` is an offer write, failure, success, or cancel */</span><br/><span class="hl-6">  </span><span class="hl-5">console</span><span class="hl-6">.</span><span class="hl-9">log</span><span class="hl-6">(</span><span class="hl-5">market</span><span class="hl-6">.</span><span class="hl-9">book</span><span class="hl-6">());</span><br/><span class="hl-6">}</span>
</code></pre>

<a href="#buying-and-selling" id="buying-and-selling" style="color: inherit; text-decoration: none;">
  <h2>Buying and selling</h2>
</a>
<pre><code class="language-js"><span class="hl-11">// Buy ETH with USDC (taker needs to approve USDC for mangrove transfer)</span><br/><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">market</span><span class="hl-6">.</span><span class="hl-5">quote</span><span class="hl-6">.</span><span class="hl-9">approveMangrove</span><span class="hl-6">();</span><br/><span class="hl-7">const</span><span class="hl-6"> { </span><span class="hl-8">takerGot</span><span class="hl-6">, </span><span class="hl-8">takerGave</span><span class="hl-6">, </span><span class="hl-8">bounty</span><span class="hl-6"> } = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">market</span><span class="hl-6">.</span><span class="hl-9">buy</span><span class="hl-6">({</span><br/><span class="hl-6">  </span><span class="hl-5">volume:</span><span class="hl-6"> </span><span class="hl-13">2.1</span><span class="hl-6">,</span><br/><span class="hl-6">  </span><span class="hl-5">price:</span><span class="hl-6"> </span><span class="hl-13">3700</span><span class="hl-6">,</span><br/><span class="hl-6">});</span><br/><span class="hl-11">// Sell ETH for USDC (taker needs to approve WETH for mangrove transfer)</span><br/><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">market</span><span class="hl-6">.</span><span class="hl-5">base</span><span class="hl-6">.</span><span class="hl-9">approveMangrove</span><span class="hl-6">();</span><br/><span class="hl-7">const</span><span class="hl-6"> { </span><span class="hl-8">takerGot2</span><span class="hl-6">, </span><span class="hl-8">takerGave2</span><span class="hl-6">, </span><span class="hl-8">bounty2</span><span class="hl-6"> } = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">market</span><span class="hl-6">.</span><span class="hl-9">sell</span><span class="hl-6">({</span><br/><span class="hl-6">  </span><span class="hl-5">volume:</span><span class="hl-6"> </span><span class="hl-13">1.1</span><span class="hl-6">,</span><br/><span class="hl-6">  </span><span class="hl-5">price:</span><span class="hl-6"> </span><span class="hl-13">3750</span><span class="hl-6">,</span><br/><span class="hl-6">});</span>
</code></pre>

<a href="#using-the-api-as-a-liquidity-provider" id="using-the-api-as-a-liquidity-provider" style="color: inherit; text-decoration: none;">
  <h1>Using the API as a liquidity provider</h1>
</a>

<a href="#connect-to-a-deployed-offer-logic-that-should-match-the-iofferlogicsol-interface" id="connect-to-a-deployed-offer-logic-that-should-match-the-iofferlogicsol-interface" style="color: inherit; text-decoration: none;">
  <h2>Connect to a deployed offer logic (that should match the <a href="https://github.com/mangrovedao/mangrove/blob/master/packages/mangrove-solidity/contracts/strategies/interfaces/IOfferLogic.sol"><code>IOfferLogic.sol</code></a> interface)</h2>
</a>
<pre><code class="language-js"><span class="hl-7">const</span><span class="hl-6"> </span><span class="hl-8">mgv</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">Mangrove</span><span class="hl-6">.</span><span class="hl-9">connect</span><span class="hl-6">(</span><span class="hl-10">&quot;maticmum&quot;</span><span class="hl-6">); </span><span class="hl-11">// Mumbai testnet</span><br/><span class="hl-11">// get an `OfferLogic` object connected to a deployed offer logic (not an async function)</span><br/><span class="hl-7">const</span><span class="hl-6"> </span><span class="hl-8">logic</span><span class="hl-6"> = </span><span class="hl-5">mgv</span><span class="hl-6">.</span><span class="hl-9">offerLogic</span><span class="hl-6">(</span><span class="hl-5">logicAddress</span><span class="hl-6">);</span><br/><br/><span class="hl-11">// approve mangrove for transfers from the logic</span><br/><span class="hl-5">logic</span><span class="hl-6">.</span><span class="hl-9">approveMangrove</span><span class="hl-6">(</span><span class="hl-10">&quot;WETH&quot;</span><span class="hl-6">, </span><span class="hl-13">10000</span><span class="hl-6">);</span><br/><span class="hl-5">logic</span><span class="hl-6">.</span><span class="hl-9">approveMangrove</span><span class="hl-6">(</span><span class="hl-10">&quot;USDC&quot;</span><span class="hl-6">, </span><span class="hl-13">1000000000000000</span><span class="hl-6">);</span><br/><br/><span class="hl-11">// read current allowance</span><br/><span class="hl-7">const</span><span class="hl-6"> </span><span class="hl-8">allowance</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">logic</span><span class="hl-6">.</span><span class="hl-9">mangroveAllowance</span><span class="hl-6">(</span><span class="hl-10">&quot;USDC&quot;</span><span class="hl-6">);</span><br/><span class="hl-11">// which is equivalent to the more generic call</span><br/><span class="hl-7">const</span><span class="hl-6"> </span><span class="hl-8">allowance2</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">mgv</span><br/><span class="hl-6">  .</span><span class="hl-9">token</span><span class="hl-6">(</span><span class="hl-10">&quot;USDC&quot;</span><span class="hl-6">)</span><br/><span class="hl-6">  .</span><span class="hl-9">allowance</span><span class="hl-6">({ </span><span class="hl-5">owner:</span><span class="hl-6"> </span><span class="hl-5">logic</span><span class="hl-6">.</span><span class="hl-5">address</span><span class="hl-6">, </span><span class="hl-5">spender:</span><span class="hl-6"> </span><span class="hl-5">mgv</span><span class="hl-6">.</span><span class="hl-5">contract</span><span class="hl-6">.</span><span class="hl-5">address</span><span class="hl-6"> });</span><br/><br/><span class="hl-11">// fund Mangrove with 0.1 ethers so that offer logic contract can post offers (bot must have ethers)</span><br/><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">logic</span><span class="hl-6">.</span><span class="hl-9">fundMangrove</span><span class="hl-6">(</span><span class="hl-13">0.1</span><span class="hl-6">);</span><br/><span class="hl-11">// equivalent to</span><br/><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">logic</span><span class="hl-6">.</span><span class="hl-5">mgv</span><span class="hl-6">.</span><span class="hl-9">fundMangrove</span><span class="hl-6">(</span><span class="hl-13">0.1</span><span class="hl-6">, </span><span class="hl-5">logic</span><span class="hl-6">.</span><span class="hl-5">address</span><span class="hl-6">);</span><br/><br/><span class="hl-11">// check current balance of offer logic at Mangrove</span><br/><span class="hl-7">let</span><span class="hl-6"> </span><span class="hl-5">balance</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">logic</span><span class="hl-6">.</span><span class="hl-9">balanceOnMangrove</span><span class="hl-6">();</span><br/><span class="hl-11">// which is equivalent to the more generic call</span><br/><span class="hl-5">balance</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">mgv</span><span class="hl-6">.</span><span class="hl-9">balanceOf</span><span class="hl-6">(</span><span class="hl-5">logic</span><span class="hl-6">.</span><span class="hl-5">address</span><span class="hl-6">);</span><br/><br/><span class="hl-11">// withdraw offer logic&#39;s balance from Mangrove to the signer&#39;s address</span><br/><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">logic</span><span class="hl-6">.</span><span class="hl-9">withdrawFromMangrove</span><span class="hl-6">(</span><span class="hl-13">0.01</span><span class="hl-6">);</span>
</code></pre>

<a href="#become-a-liquidity-provider-on-a-market" id="become-a-liquidity-provider-on-a-market" style="color: inherit; text-decoration: none;">
  <h2>Become a liquidity provider on a market</h2>
</a>

<a href="#connect-an-eoa-to-a-market" id="connect-an-eoa-to-a-market" style="color: inherit; text-decoration: none;">
  <h3>Connect an EOA to a market</h3>
</a>
<p>To post direct offers on a market (via signer&#39;s EOA), on gets a <code>LiquidityProvider</code> object from the API by connecting it to a <code>market</code>:</p>
<pre><code class="language-js"><span class="hl-7">const</span><span class="hl-6"> </span><span class="hl-8">market</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">mgv</span><span class="hl-6">.</span><span class="hl-9">market</span><span class="hl-6">({ </span><span class="hl-5">base:</span><span class="hl-6"> </span><span class="hl-10">&quot;ETH&quot;</span><span class="hl-6">, </span><span class="hl-5">quote:</span><span class="hl-6"> </span><span class="hl-10">&quot;USDC&quot;</span><span class="hl-6"> });</span><br/><span class="hl-11">// get a liquidity provider using signer&#39;s account for posting offers</span><br/><span class="hl-7">let</span><span class="hl-6"> </span><span class="hl-5">liquidity_provider</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">mgv</span><span class="hl-6">.</span><span class="hl-9">liquidityProvider</span><span class="hl-6">(</span><span class="hl-5">market</span><span class="hl-6">);</span><br/><span class="hl-11">//or one is not connected to a market already:</span><br/><span class="hl-5">liquidity_provider</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">mgv</span><span class="hl-6">.</span><span class="hl-9">liquidityProvider</span><span class="hl-6">({</span><br/><span class="hl-6">  </span><span class="hl-5">base:</span><span class="hl-6"> </span><span class="hl-10">&quot;ETH&quot;</span><span class="hl-6">,</span><br/><span class="hl-6">  </span><span class="hl-5">quote:</span><span class="hl-6"> </span><span class="hl-10">&quot;USDC&quot;</span><span class="hl-6">,</span><br/><span class="hl-6">});</span>
</code></pre>

<a href="#connect-an-onchain-offer-logic-to-a-market" id="connect-an-onchain-offer-logic-to-a-market" style="color: inherit; text-decoration: none;">
  <h3>Connect an onchain offer logic to a market</h3>
</a>
<p>To post an offer via an onchain logic, one uses the <code>OfferLogic</code> object to connect to a market:</p>
<pre><code class="language-js"><span class="hl-7">const</span><span class="hl-6"> </span><span class="hl-8">logic</span><span class="hl-6"> = </span><span class="hl-5">mgv</span><span class="hl-6">.</span><span class="hl-9">offerLogic</span><span class="hl-6">(</span><span class="hl-5">logicAddress</span><span class="hl-6">);</span><br/><span class="hl-11">// get a liquidity provider using an onchain offer logic for posting offers</span><br/><span class="hl-7">const</span><span class="hl-6"> </span><span class="hl-8">liquidity_provider</span><span class="hl-6"> = </span><span class="hl-5">logic</span><span class="hl-6">.</span><span class="hl-9">liquidityProvider</span><span class="hl-6">({</span><br/><span class="hl-6">  </span><span class="hl-5">base:</span><span class="hl-6"> </span><span class="hl-10">&quot;ETH&quot;</span><span class="hl-6">,</span><br/><span class="hl-6">  </span><span class="hl-5">quote:</span><span class="hl-6"> </span><span class="hl-10">&quot;USDC&quot;</span><span class="hl-6">,</span><br/><span class="hl-6">});</span>
</code></pre>

<a href="#send-bids-and-asks-to-mangrove" id="send-bids-and-asks-to-mangrove" style="color: inherit; text-decoration: none;">
  <h2>Send bids and asks to Mangrove</h2>
</a>
<pre><code class="language-js"><span class="hl-11">// post a new offer giving weth against usdc</span><br/><span class="hl-11">// you can give gives/wants or price/volume</span><br/><span class="hl-11">// id:number is the new offer id</span><br/><span class="hl-11">// event:ethers.Event is the ethers.js event that created the offer</span><br/><span class="hl-7">const</span><span class="hl-6"> { </span><span class="hl-5">id</span><span class="hl-6">: </span><span class="hl-8">askId</span><span class="hl-6">, </span><span class="hl-8">event</span><span class="hl-6"> } = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">liquidity_provider</span><span class="hl-6">.</span><span class="hl-9">newAsk</span><span class="hl-6">({</span><br/><span class="hl-6">  </span><span class="hl-5">wants:</span><span class="hl-6"> </span><span class="hl-13">3500</span><span class="hl-6">,</span><br/><span class="hl-6">  </span><span class="hl-5">gives:</span><span class="hl-6"> </span><span class="hl-13">1</span><span class="hl-6">,</span><br/><span class="hl-6">});</span><br/><br/><span class="hl-11">// post a new offer giving usdc against weth</span><br/><span class="hl-7">const</span><span class="hl-6"> { </span><span class="hl-5">id</span><span class="hl-6">: </span><span class="hl-8">bidId</span><span class="hl-6">, </span><span class="hl-8">event_</span><span class="hl-6"> } = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">liquidity_provider</span><span class="hl-6">.</span><span class="hl-9">newBid</span><span class="hl-6">({</span><br/><span class="hl-6">  </span><span class="hl-5">price:</span><span class="hl-6"> </span><span class="hl-13">3400</span><span class="hl-6">,</span><br/><span class="hl-6">  </span><span class="hl-5">volume:</span><span class="hl-6"> </span><span class="hl-13">2</span><span class="hl-6">,</span><br/><span class="hl-6">});</span><br/><br/><span class="hl-7">const</span><span class="hl-6"> </span><span class="hl-8">asks</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">liquidity_provider</span><span class="hl-6">.</span><span class="hl-9">asks</span><span class="hl-6">();</span><br/><span class="hl-7">const</span><span class="hl-6"> </span><span class="hl-8">bids</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">liquidity_provider</span><span class="hl-6">.</span><span class="hl-9">bids</span><span class="hl-6">();</span><br/><br/><span class="hl-11">// Update an existing ask.</span><br/><span class="hl-11">// You can update gives/wants or price/volume. Other parameters will not change.</span><br/><br/><span class="hl-7">const</span><span class="hl-6"> </span><span class="hl-8">promise</span><span class="hl-6"> = </span><span class="hl-5">liquidity_provider</span><span class="hl-6">.</span><span class="hl-9">updateAsk</span><span class="hl-6">(</span><span class="hl-5">askId</span><span class="hl-6">, { </span><span class="hl-5">wants:</span><span class="hl-6"> </span><span class="hl-13">3600</span><span class="hl-6">, </span><span class="hl-5">gives:</span><span class="hl-6"> </span><span class="hl-13">1</span><span class="hl-6"> });</span><br/><span class="hl-5">promise</span><span class="hl-6">.</span><span class="hl-9">then</span><span class="hl-6">((</span><span class="hl-5">event</span><span class="hl-6">) </span><span class="hl-7">=&gt;</span><span class="hl-6"> </span><span class="hl-5">console</span><span class="hl-6">.</span><span class="hl-9">log</span><span class="hl-6">(</span><span class="hl-10">&quot;offer updated&quot;</span><span class="hl-6">, </span><span class="hl-5">event</span><span class="hl-6">));</span><br/><br/><span class="hl-11">// Cancel an existing bid.</span><br/><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">liquidity_provider</span><span class="hl-6">.</span><span class="hl-9">retractBid</span><span class="hl-6">(</span><span class="hl-5">bidId</span><span class="hl-6">);</span>
</code></pre>

<a href="#more-code-examples" id="more-code-examples" style="color: inherit; text-decoration: none;">
  <h1>More Code Examples</h1>
</a>
<p>See the docblock comments above each function definition or the official <a href="https://jsdocs.mangrove.exchange/">mangrove.js Documentation</a>.</p>

<a href="#instance-creation-ethereum-provider-and-signer" id="instance-creation-ethereum-provider-and-signer" style="color: inherit; text-decoration: none;">
  <h1>Instance Creation (Ethereum provider and signer)</h1>
</a>
<p>See <code>examples</code> directory for instance creation examples.</p>
<p>Mangrove SDK initialization requires an Ethereum provider and an Ethereum signer.
They can be provided and configured in various ways, some of which are described below.</p>
<p>The following are valid Ethereum providers for initialization of the SDK.</p>
<pre><code class="language-js"><span class="hl-5">mgv</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">Mangrove</span><span class="hl-6">.</span><span class="hl-9">connect</span><span class="hl-6">(</span><span class="hl-5">window</span><span class="hl-6">.</span><span class="hl-5">ethereum</span><span class="hl-6">); </span><span class="hl-11">// web browser</span><br/><br/><span class="hl-5">mgv</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">Mangrove</span><span class="hl-6">.</span><span class="hl-9">connect</span><span class="hl-6">(</span><span class="hl-10">&#39;http://127.0.0.1:8545&#39;</span><span class="hl-6">); </span><span class="hl-11">// HTTP provider</span><br/><br/><span class="hl-5">mgv</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">Mangrove</span><span class="hl-6">.</span><span class="hl-9">connect</span><span class="hl-6">(</span><span class="hl-10">&#39;rinkeby&#39;</span><span class="hl-6">); </span><span class="hl-11">// Uses Ethers.js fallback (for testing only)</span><br/><br/><span class="hl-11">// Init with private key (server side)</span><br/><span class="hl-11">/* Note that if you provide BOTH provider and signer info,</span><br/><span class="hl-11">   any connection info on the signer will be ignored, and any credentials on the provider will be ignored. */</span><br/><span class="hl-5">mgv</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">Mangrove</span><span class="hl-6">.</span><span class="hl-9">connect</span><span class="hl-6">({</span><br/><span class="hl-6">  </span><span class="hl-5">provider:</span><span class="hl-6"> </span><span class="hl-10">&#39;https://mainnet.infura.io/v3/_your_project_id_&#39;</span><span class="hl-6">,</span><br/><span class="hl-6">  </span><span class="hl-5">privateKey:</span><span class="hl-6"> </span><span class="hl-10">&#39;0x_your_private_key_&#39;</span><span class="hl-6">, </span><span class="hl-11">// preferably with environment variable</span><br/><span class="hl-6">});</span><br/><br/><span class="hl-11">// Init with a signer and a provider in e.g. hardhat:</span><br/><span class="hl-5">mgv</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">Mangrove</span><span class="hl-6">.</span><span class="hl-9">connect</span><span class="hl-6">({</span><br/><span class="hl-6">  </span><span class="hl-5">provider:</span><span class="hl-6"> </span><span class="hl-10">&#39;https://mainnet.infura.io/v3/_your_project_id_&#39;</span><span class="hl-6">,</span><br/><span class="hl-6">  </span><span class="hl-5">signer:</span><span class="hl-6"> </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">hre</span><span class="hl-6">.</span><span class="hl-5">ethers</span><span class="hl-6">.</span><span class="hl-9">getSigners</span><span class="hl-6">()[</span><span class="hl-13">0</span><span class="hl-6">];</span><br/><span class="hl-6">});</span><br/><br/><span class="hl-11">// Init with HD mnemonic (server side)</span><br/><span class="hl-5">mgv</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">Mangrove</span><span class="hl-6">.</span><span class="hl-9">connect</span><span class="hl-6">({</span><br/><span class="hl-6">  </span><span class="hl-5">provider:</span><span class="hl-6"> </span><span class="hl-10">&#39;mainnet&#39;</span><span class="hl-6">,</span><br/><span class="hl-6">  </span><span class="hl-5">mnemonic:</span><span class="hl-6"> </span><span class="hl-10">&#39;clutch captain shoe...&#39;</span><span class="hl-6">, </span><span class="hl-11">// preferably with environment variable</span><br/><span class="hl-6">});</span><br/><br/><span class="hl-11">// Init with a keystore file (json wallet)</span><br/><span class="hl-5">mgv</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">Mangrove</span><span class="hl-6">.</span><span class="hl-9">connect</span><span class="hl-6">({</span><br/><span class="hl-6">  </span><span class="hl-5">provider:</span><span class="hl-6"> </span><span class="hl-10">&#39;https://mainnet.infura.io/v3/_your_project_id_&#39;</span><span class="hl-6">,</span><br/><span class="hl-6">  </span><span class="hl-5">jsonWallet:</span><span class="hl-6"> {</span><br/><span class="hl-6">    </span><span class="hl-5">path:</span><span class="hl-6"> </span><span class="hl-10">&#39;path/to/UTC--created_date_time--address&#39;</span><span class="hl-6">,</span><br/><span class="hl-6">    </span><span class="hl-5">password:</span><span class="hl-6"> </span><span class="hl-10">&#39;wallet_password&#39;</span><span class="hl-6"> </span><span class="hl-11">// preferably with environment variable</span><br/><span class="hl-6">  }</span><br/><span class="hl-6">});</span><br/><br/><span class="hl-11">// Init with a custom ethers.js provider, for example a WebSocketProvider (server side)</span><br/><span class="hl-5">provider</span><span class="hl-6"> = </span><span class="hl-7">new</span><span class="hl-6"> </span><span class="hl-5">ethers</span><span class="hl-6">.</span><span class="hl-5">providers</span><span class="hl-6">.</span><span class="hl-9">WebSocketProvider</span><span class="hl-6">(</span><span class="hl-10">&#39;wss://polygon-mumbai.g.alchemy.com/v2/_your_project_id_&#39;</span><span class="hl-6">);</span><br/><span class="hl-5">signer</span><span class="hl-6"> = </span><span class="hl-7">new</span><span class="hl-6"> </span><span class="hl-5">ethers</span><span class="hl-6">.</span><span class="hl-9">Wallet</span><span class="hl-6">(</span><span class="hl-10">&#39;0x_your_private_key_&#39;</span><span class="hl-6">, </span><span class="hl-5">provider</span><span class="hl-6">);</span><br/><span class="hl-5">mgv</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">Mangrove</span><span class="hl-6">.</span><span class="hl-9">connect</span><span class="hl-6">({</span><span class="hl-5">signer:</span><span class="hl-6"> </span><span class="hl-5">signer</span><span class="hl-6">});</span><br/><br/><span class="hl-11">// Init with a EIP-1193 provider object (server side)</span><br/><span class="hl-5">provider</span><span class="hl-6"> = </span><span class="hl-7">new</span><span class="hl-6"> </span><span class="hl-5">Web3</span><span class="hl-6">.</span><span class="hl-5">providers</span><span class="hl-6">.</span><span class="hl-9">WebsocketProvider</span><span class="hl-6">(</span><span class="hl-10">&#39;wss://polygon-mumbai.g.alchemy.com/v2/_your_project_id_&#39;</span><span class="hl-6">);</span><br/><span class="hl-5">mgv</span><span class="hl-6"> = </span><span class="hl-12">await</span><span class="hl-6"> </span><span class="hl-5">Mangrove</span><span class="hl-6">.</span><span class="hl-9">connect</span><span class="hl-6">({</span><br/><span class="hl-6">  </span><span class="hl-5">provider:</span><span class="hl-6"> </span><span class="hl-5">provider</span><span class="hl-6">,</span><br/><span class="hl-6">  </span><span class="hl-5">privateKey:</span><span class="hl-6"> </span><span class="hl-10">&#39;0x_your_private_key_&#39;</span><br/><span class="hl-6">});</span>
</code></pre>
<p>Here is the type of the argument to connect: <code>string | CreateSignerOption</code>, where a string indicates a URL, and:</p>
<pre><code class="language-typescript"><span class="hl-11">/* privateKey, mnemonic, signer, jsonWallet *will override*</span><br/><span class="hl-11">   any credentials stored in provider object */</span><br/><span class="hl-12">export</span><span class="hl-6"> </span><span class="hl-7">interface</span><span class="hl-6"> </span><span class="hl-14">CreateSignerOptions</span><span class="hl-6"> {</span><br/><span class="hl-6">  </span><span class="hl-11">// object or URL</span><br/><span class="hl-6">  </span><span class="hl-5">provider</span><span class="hl-6">?: </span><span class="hl-14">Provider</span><span class="hl-6"> | </span><span class="hl-14">string</span><span class="hl-6">;</span><br/><span class="hl-6">  </span><span class="hl-11">// optional in addition to provider object: gets signer number `signerIndex` of the provider</span><br/><span class="hl-6">  </span><span class="hl-5">signerIndex</span><span class="hl-6">?: </span><span class="hl-14">number</span><span class="hl-6">;</span><br/><span class="hl-6">  </span><span class="hl-11">// raw privkey without 0x prefix</span><br/><span class="hl-6">  </span><span class="hl-5">privateKey</span><span class="hl-6">?: </span><span class="hl-14">string</span><span class="hl-6">;</span><br/><span class="hl-6">  </span><span class="hl-11">// BIP39 mnemonic</span><br/><span class="hl-6">  </span><span class="hl-5">mnemonic</span><span class="hl-6">?: </span><span class="hl-14">string</span><span class="hl-6">;</span><br/><span class="hl-6">  </span><span class="hl-11">// optional in addition to mnemonic: BIP44 path</span><br/><span class="hl-6">  </span><span class="hl-5">path</span><span class="hl-6">?: </span><span class="hl-14">string</span><span class="hl-6">;</span><br/><span class="hl-6">  </span><span class="hl-11">// signer object</span><br/><span class="hl-6">  </span><span class="hl-5">signer</span><span class="hl-6">?: </span><span class="hl-14">any</span><span class="hl-6">;</span><br/><span class="hl-6">  </span><span class="hl-11">// json wallet access information</span><br/><span class="hl-6">  </span><span class="hl-5">jsonWallet</span><span class="hl-6">?: </span><span class="hl-14">JsonWalletOptions</span><span class="hl-6">;</span><br/><span class="hl-6">  </span><span class="hl-11">// if constructor finds no signer, it will throw unless this option is set to true.</span><br/><span class="hl-6">  </span><span class="hl-5">forceReadOnly</span><span class="hl-6">?: </span><span class="hl-14">boolean</span><span class="hl-6">;</span><br/><span class="hl-6">}</span><br/><br/><span class="hl-7">interface</span><span class="hl-6"> </span><span class="hl-14">JsonWalletOptions</span><span class="hl-6"> {</span><br/><span class="hl-6">  </span><span class="hl-11">// local path to json wallet file</span><br/><span class="hl-6">  </span><span class="hl-5">path</span><span class="hl-6">: </span><span class="hl-14">string</span><span class="hl-6">;</span><br/><span class="hl-6">  </span><span class="hl-11">// json wallet password</span><br/><span class="hl-6">  </span><span class="hl-5">password</span><span class="hl-6">: </span><span class="hl-14">string</span><span class="hl-6">;</span><br/><span class="hl-6">}</span>
</code></pre>

<a href="#constants-and-contract-addresses" id="constants-and-contract-addresses" style="color: inherit; text-decoration: none;">
  <h2>Constants and Contract Addresses</h2>
</a>
<p>Names of contracts, their addresses and token decimals can be found in <code>/src/constants.ts</code>. ABIs and typechain-generated types are in <code>types/typechain/</code>. Addresses, for all networks, can be easily fetched using the <code>getAddress</code> function, combined with contract name constants.</p>
<pre><code class="language-js"><span class="hl-5">cUsdtAddress</span><span class="hl-6"> = </span><span class="hl-5">Mangrove</span><span class="hl-6">.</span><span class="hl-9">getAddress</span><span class="hl-6">(</span><span class="hl-10">&quot;USDC&quot;</span><span class="hl-6">);</span><br/><span class="hl-11">// Mainnet USDC address. Second parameter can be a network like &#39;rinkeby&#39;.</span>
</code></pre>

<a href="#numbers" id="numbers" style="color: inherit; text-decoration: none;">
  <h2>Numbers</h2>
</a>
<p>Numbers returned by functions are either plain js numbers or <code>big.js</code> instances. Some functions with names ending in <code>Raw</code> may return ether.js&#39;s BigNumbers.</p>
<p>As input, numbers can be as plain js numbers, <code>big.js</code> instances, but also strings.</p>
<p>The precision used when dividing is 20 decimal places.</p>

<a href="#transaction-options" id="transaction-options" style="color: inherit; text-decoration: none;">
  <h2>Transaction Options</h2>
</a>
<p>TODO include transaction options (see here)[<a href="https://github.com/compound-finance/compound-js#transaction-options%5D">https://github.com/compound-finance/compound-js#transaction-options]</a></p>

<a href="#package-configuration" id="package-configuration" style="color: inherit; text-decoration: none;">
  <h2>Package configuration</h2>
</a>
<p>mangrove.js uses the <a href="https://github.com/lorenwest/node-config">node-config</a> package for configuration.</p>
<p>It allows apps who requires <code>mangrove.js</code> to override default package configuration, by setting configuration in <code>MangroveJs</code> namespace.</p>
<p>Example of app configuration (<code>config/default.js</code>):</p>
<pre><code class="language-javascript"><span class="hl-7">var</span><span class="hl-6"> </span><span class="hl-5">config</span><span class="hl-6"> = {</span><br/><span class="hl-6">  ...</span><br/><br/><span class="hl-6">  </span><span class="hl-5">MangroveJs</span><span class="hl-6">: {</span><br/><span class="hl-6">    </span><span class="hl-5">logLevel:</span><span class="hl-6"> </span><span class="hl-10">&quot;info&quot;</span><span class="hl-6">,</span><br/><span class="hl-6">    ...</span><br/><span class="hl-6">  }</span><br/><span class="hl-6">};</span><br/><span class="hl-14">module</span><span class="hl-6">.</span><span class="hl-14">exports</span><span class="hl-6"> = </span><span class="hl-5">config</span><span class="hl-6">;</span>
</code></pre>

<a href="#logging" id="logging" style="color: inherit; text-decoration: none;">
  <h2>Logging</h2>
</a>
<p>Console logging is enabled by default.</p>
<p>Logging can be configured with the following directives (see <a href="#package-configuration">Package
configuration</a>).</p>
<ul>
<li><code>logLevel</code>: set logging level;</li>
<li><code>logFile</code>: enable file logging.</li>
</ul>

<a href="#tests" id="tests" style="color: inherit; text-decoration: none;">
  <h2>Tests</h2>
</a>
<p>Tests are available in <code>./test/integration/*.integration.test.js</code>. Methods are tested using an in-process local chain using <a href="https://hardhat.org/">Hardhat</a>. For free archive node access, get a provider URL from <a href="http://alchemy.com/">Alchemy</a>.</p>
<pre><code class="language-bash"><span class="hl-11">## Run all tests</span><br/><span class="hl-6">yarn </span><span class="hl-9">test</span><br/><br/><span class="hl-11">## Run a single test (Mocha JS grep option)</span><br/><span class="hl-6">yarn </span><span class="hl-9">test</span><span class="hl-6"> -- -g </span><span class="hl-10">&#39;subscribes&#39;</span>
</code></pre>

<a href="#test-configuration-and-root-hooks" id="test-configuration-and-root-hooks" style="color: inherit; text-decoration: none;">
  <h3>Test configuration and root hooks</h3>
</a>
<p>Tests are based on <a href="https://mochajs.org/">Mocha</a>. Mocha configuration can be found in <code>./test/mocha/config</code>.</p>
<p>The integration tests use the Root Hooks provided by <code>@mangrovedao/hardhat-utils</code> which start an in-process Hardhat chain with Mangrove deployed and add a matching <code>Provider</code> to the Mocha <code>Context</code>.</p>

<a href="#utility-test-scripts" id="utility-test-scripts" style="color: inherit; text-decoration: none;">
  <h3>Utility test scripts</h3>
</a>
<p>Scripts to ease testing of your Mangrove.js-based dApp can be found in <code>./test/scripts/</code>.</p>

<a href="#obfillerjs--order-book-filler" id="obfillerjs--order-book-filler" style="color: inherit; text-decoration: none;">
  <h4><code>obFiller.js</code> : Order book filler</h4>
</a>
<p>The <code>obFiller.js</code> script runs a local Hardhat chain where offers are continously added/removed.</p>
<p>The script helpfully prints mnemonic and addresses that you can copy to MetaMask and your dApp:</p>
<pre><code class="language-shell"><span class="hl-6">$ ts-node test/scripts/obFiller.js</span><br/><span class="hl-6">Mnemonic:</span><br/><span class="hl-9">test</span><span class="hl-6"> </span><span class="hl-9">test</span><span class="hl-6"> </span><span class="hl-9">test</span><span class="hl-6"> </span><span class="hl-9">test</span><span class="hl-6"> </span><span class="hl-9">test</span><span class="hl-6"> </span><span class="hl-9">test</span><span class="hl-6"> </span><span class="hl-9">test</span><span class="hl-6"> </span><span class="hl-9">test</span><span class="hl-6"> </span><span class="hl-9">test</span><span class="hl-6"> </span><span class="hl-9">test</span><span class="hl-6"> </span><span class="hl-9">test</span><span class="hl-6"> junk</span><br/><br/><span class="hl-6">RPC node</span><br/><span class="hl-6">http://localhost:8546</span><br/><br/><span class="hl-6">User/admin</span><br/><span class="hl-6">0xf39Fd6e51aad88F6F4ce6aB8827279cffFb92266</span><br/><br/><span class="hl-6">WETH (18 decimals)</span><br/><span class="hl-6">0xDB6BDf95fDb367F2c983167C0f1Ec4a8913694a5</span><br/><br/><span class="hl-6">DAI (18 decimals)</span><br/><span class="hl-6">0xE77A0C6E103fB655AAA2F31b892deF9Cf0909158</span><br/><br/><span class="hl-6">USDC (6 decimals)</span><br/><span class="hl-6">0x5d268aEd192e6C55a950ccd65Fe209A13F0e338f</span><br/><br/><span class="hl-6">Orderbook filler is now running.</span>
</code></pre>

<a href="#build-for-nodejs-amp-web-browser" id="build-for-nodejs-amp-web-browser" style="color: inherit; text-decoration: none;">
  <h2>Build for Node.js &amp; Web Browser</h2>
</a>
<pre><code class="language-shell"><span class="hl-6">$ git clone ...</span><br/><span class="hl-6">$ </span><span class="hl-9">cd</span><span class="hl-6"> &lt;Mangrove clone&gt;</span><br/><span class="hl-6">$ yarn install              </span><span class="hl-11"># &lt;- Only required after initial clone, afterwards &#39;yarn build&#39; is sufficient</span><br/><span class="hl-6">$ </span><span class="hl-9">cd</span><span class="hl-6"> packages/mangrove.js</span><br/><span class="hl-6">$ yarn build</span>
</code></pre>
<p>The build artifacts will be placed in <code>./dist/nodejs</code> and <code>./dist/browser</code>.</p>

<a href="#cli-mgv" id="cli-mgv" style="color: inherit; text-decoration: none;">
  <h2>CLI: <code>mgv</code></h2>
</a>
<p>mangrove.js includes an experimental command line interface (CLI) for interacting with Mangrove.
You can run it using <code>npx</code>, <code>yarn</code>, or directly (if you install mangrove.js globally):</p>
<pre><code class="language-shell"><span class="hl-6">$ npx mgv</span><br/><span class="hl-6">$ yarn mgv</span><br/><span class="hl-6">$ mgv         </span><span class="hl-11"># requires mangrove.js to be installed globally: npm -g install mangrove.js</span><br/><span class="hl-6">mgv.js &lt;command&gt;</span><br/><br/><span class="hl-6">Commands:</span><br/><span class="hl-6">  mgv.js parrot                  reports the current environment and warns of</span><br/><span class="hl-6">                                 any discrepancies       [aliases: env-overview]</span><br/><span class="hl-6">  mgv.js print &lt;base&gt; &lt;quote&gt;    print the offers on a market</span><br/><span class="hl-6">  mgv.js retract &lt;base&gt; &lt;quote&gt;  retracts all offers from the given market</span><br/><br/><span class="hl-6">Options:</span><br/><span class="hl-6">  --version  Show version number                                       [boolean]</span><br/><span class="hl-6">  --help     Show </span><span class="hl-9">help</span><span class="hl-6">                                                 [boolean]</span><br/><br/><span class="hl-6">Arguments may be provided </span><span class="hl-12">in</span><span class="hl-6"> env vars beginning with </span><span class="hl-10">&#39;MGV_&#39;</span><span class="hl-6">. For example,</span><br/><span class="hl-6">MGV_NODE_URL=https://node.url can be used instead of --nodeUrl https://node.url</span><br/><br/><span class="hl-6">You need at least one </span><span class="hl-9">command</span><span class="hl-6"> before moving on</span>
</code></pre>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li><li class="label tsd-is-external"><span>Internals</span></li><li class=" tsd-kind-namespace"><a href="modules/eth.html">eth</a></li><li class=" tsd-kind-namespace"><a href="modules/LiquidityProvider.html">Liquidity<wbr/>Provider</a></li><li class=" tsd-kind-namespace"><a href="modules/Mangrove.html">Mangrove</a></li><li class=" tsd-kind-namespace"><a href="modules/Market.html">Market</a></li><li class=" tsd-kind-namespace"><a href="modules/Semibook.html">Semibook</a></li><li class="label tsd-is-external"><span>Externals</span></li><li class=" tsd-kind-namespace tsd-is-external"><a href="modules/ethers.html">ethers</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-class"><a href="classes/AaveV3Module.html" class="tsd-kind-icon">Aave<wbr/>V3<wbr/>Module</a></li><li class="tsd-kind-variable"><a href="modules.html#decimals" class="tsd-kind-icon">decimals</a></li><li class="tsd-kind-reference"><a href="modules.html#default" class="tsd-kind-icon">default</a></li><li class="tsd-kind-class"><a href="classes/LiquidityProvider.html" class="tsd-kind-icon">Liquidity<wbr/>Provider</a></li><li class="tsd-kind-class"><a href="classes/Mangrove.html" class="tsd-kind-icon">Mangrove</a></li><li class="tsd-kind-class"><a href="classes/Market.html" class="tsd-kind-icon">Market</a></li><li class="tsd-kind-class"><a href="classes/MgvToken.html" class="tsd-kind-icon">Mgv<wbr/>Token</a></li><li class="tsd-kind-class"><a href="classes/OfferLogic.html" class="tsd-kind-icon">Offer<wbr/>Logic</a></li><li class="tsd-kind-class"><a href="classes/Semibook.html" class="tsd-kind-icon">Semibook</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>
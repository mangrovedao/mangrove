<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Semibook | @mangrovedao/mangrove.js</title><meta name="description" content="Documentation for @mangrovedao/mangrove.js"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script async src="../assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">@mangrovedao/mangrove.js</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><ul class="tsd-breadcrumb"><li><a href="../modules.html">@mangrovedao/mangrove.js</a></li><li><a href="Semibook.html">Semibook</a></li></ul><h1>Namespace Semibook </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><section class="tsd-panel-group tsd-index-group"><h2>Index</h2><section class="tsd-panel tsd-index-panel"><div class="tsd-index-content"><section class="tsd-index-section "><h3>Type Aliases</h3><ul class="tsd-index-list"><li class="tsd-kind-type-alias tsd-parent-kind-namespace"><a href="Semibook.html#Event" class="tsd-kind-icon">Event</a></li><li class="tsd-kind-type-alias tsd-parent-kind-namespace"><a href="Semibook.html#EventListener" class="tsd-kind-icon">Event<wbr/>Listener</a></li><li class="tsd-kind-type-alias tsd-parent-kind-namespace"><a href="Semibook.html#BlockListener" class="tsd-kind-icon">Block<wbr/>Listener</a></li><li class="tsd-kind-type-alias tsd-parent-kind-namespace"><a href="Semibook.html#VolumeParams" class="tsd-kind-icon">Volume<wbr/>Params</a></li><li class="tsd-kind-type-alias tsd-parent-kind-namespace"><a href="Semibook.html#Options" class="tsd-kind-icon">Options</a></li></ul></section><section class="tsd-index-section "><h3>Interfaces</h3><ul class="tsd-index-list"><li class="tsd-kind-interface tsd-parent-kind-namespace"><a href="../interfaces/Semibook.CacheIterator.html" class="tsd-kind-icon">Cache<wbr/>Iterator</a></li></ul></section></div></section></section><section class="tsd-panel-group tsd-member-group "><h2>Type Aliases</h2><section class="tsd-panel tsd-member tsd-kind-type-alias tsd-parent-kind-namespace"><a id="Event" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event<a href="#Event" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">Event<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">{ </span>cbArg<span class="tsd-signature-symbol">: </span><a href="Market.html#BookSubscriptionCbArgument" class="tsd-signature-type" data-tsd-kind="Type alias">BookSubscriptionCbArgument</a><span class="tsd-signature-symbol">; </span>event<span class="tsd-signature-symbol">: </span><a href="Market.html#BookSubscriptionEvent" class="tsd-signature-type" data-tsd-kind="Type alias">BookSubscriptionEvent</a><span class="tsd-signature-symbol">; </span>ethersLog<span class="tsd-signature-symbol">: </span><a href="../interfaces/ethers.providers.Log.html" class="tsd-signature-type" data-tsd-kind="Interface">Log</a><span class="tsd-signature-symbol"> }</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/mangrovedao/mangrove/blob/b39f9c2/packages/mangrove.js/src/semibook.ts#L14">src/semibook.ts:14</a></li></ul></aside><div class="tsd-type-declaration"><h4>Type declaration</h4><ul class="tsd-parameters"><li class="tsd-parameter"><h5>cb<wbr/>Arg<span class="tsd-signature-symbol">: </span><a href="Market.html#BookSubscriptionCbArgument" class="tsd-signature-type" data-tsd-kind="Type alias">BookSubscriptionCbArgument</a></h5></li><li class="tsd-parameter"><h5>event<span class="tsd-signature-symbol">: </span><a href="Market.html#BookSubscriptionEvent" class="tsd-signature-type" data-tsd-kind="Type alias">BookSubscriptionEvent</a></h5></li><li class="tsd-parameter"><h5>ethers<wbr/>Log<span class="tsd-signature-symbol">: </span><a href="../interfaces/ethers.providers.Log.html" class="tsd-signature-type" data-tsd-kind="Interface">Log</a></h5></li></ul></div></section><section class="tsd-panel tsd-member tsd-kind-type-alias tsd-parent-kind-namespace"><a id="EventListener" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Event<wbr/>Listener<a href="#EventListener" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">Event<wbr/>Listener<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span>e<span class="tsd-signature-symbol">: </span><a href="Semibook.html" class="tsd-signature-type" data-tsd-kind="Namespace">Semibook</a><span class="tsd-signature-symbol">.</span><a href="Semibook.html#Event" class="tsd-signature-type" data-tsd-kind="Type alias">Event</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">)</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/mangrovedao/mangrove/blob/b39f9c2/packages/mangrove.js/src/semibook.ts#L20">src/semibook.ts:20</a></li></ul></aside><div class="tsd-type-declaration"><h4>Type declaration</h4><ul class="tsd-parameters"><li class="tsd-parameter-signature"><ul class="tsd-signatures tsd-kind-type-literal tsd-parent-kind-type-alias"><li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">(</span>e<span class="tsd-signature-symbol">: </span><a href="Semibook.html" class="tsd-signature-type" data-tsd-kind="Namespace">Semibook</a><span class="tsd-signature-symbol">.</span><a href="Semibook.html#Event" class="tsd-signature-type" data-tsd-kind="Type alias">Event</a><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>e: <a href="Semibook.html" class="tsd-signature-type" data-tsd-kind="Namespace">Semibook</a><span class="tsd-signature-symbol">.</span><a href="Semibook.html#Event" class="tsd-signature-type" data-tsd-kind="Type alias">Event</a></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></li></ul></div></section><section class="tsd-panel tsd-member tsd-kind-type-alias tsd-parent-kind-namespace"><a id="BlockListener" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Block<wbr/>Listener<a href="#BlockListener" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">Block<wbr/>Listener<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">(</span>n<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol"> =&gt; </span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">)</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/mangrovedao/mangrove/blob/b39f9c2/packages/mangrove.js/src/semibook.ts#L22">src/semibook.ts:22</a></li></ul></aside><div class="tsd-type-declaration"><h4>Type declaration</h4><ul class="tsd-parameters"><li class="tsd-parameter-signature"><ul class="tsd-signatures tsd-kind-type-literal tsd-parent-kind-type-alias"><li class="tsd-signature tsd-kind-icon"><span class="tsd-signature-symbol">(</span>n<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span></li></ul><ul class="tsd-descriptions"><li class="tsd-description"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameters"><li><h5>n: <span class="tsd-signature-type">number</span></h5></li></ul><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4></li></ul></li></ul></div></section><section class="tsd-panel tsd-member tsd-kind-type-alias tsd-parent-kind-namespace"><a id="VolumeParams" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Volume<wbr/>Params<a href="#VolumeParams" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">Volume<wbr/>Params<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">{ </span>given<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Bigish</span><span class="tsd-signature-symbol">; </span>to<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">&quot;buy&quot;</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">&quot;sell&quot;</span><span class="tsd-signature-symbol"> }</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/mangrovedao/mangrove/blob/b39f9c2/packages/mangrove.js/src/semibook.ts#L31">src/semibook.ts:31</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Specification of how much volume to (potentially) trade on the semibook.</p>
</div><div><p><code>{given:100, to:&quot;buy&quot;}</code> means buying 100 base tokens.</p>
<p><code>{given:10, to:&quot;sell&quot;})</code> means selling 10 quote tokens.</p>
</div></div><div class="tsd-type-declaration"><h4>Type declaration</h4><ul class="tsd-parameters"><li class="tsd-parameter"><h5>given<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Bigish</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Amount of token to trade.</p>
</div></div></li><li class="tsd-parameter"><h5>to<span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">&quot;buy&quot;</span><span class="tsd-signature-symbol"> | </span><span class="tsd-signature-type">&quot;sell&quot;</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>Whether <code>given</code> is base to be bought or quote to be sold.</p>
</div></div></li></ul></div></section><section class="tsd-panel tsd-member tsd-kind-type-alias tsd-parent-kind-namespace"><a id="Options" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Options<a href="#Options" aria-label="Permalink" class="tsd-anchor-icon"><svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-link" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor" fill="none" stroke-linecap="round" stroke-linejoin="round"><path stroke="none" d="M0 0h24v24H0z" fill="none"></path><path d="M10 14a3.5 3.5 0 0 0 5 0l4 -4a3.5 3.5 0 0 0 -5 -5l-.5 .5"></path><path d="M14 10a3.5 3.5 0 0 0 -5 0l-4 4a3.5 3.5 0 0 0 5 5l.5 -.5"></path></svg></a></h3><div class="tsd-signature tsd-kind-icon">Options<span class="tsd-signature-symbol">:</span> <span class="tsd-signature-symbol">{ </span>maxOffers<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">; </span>chunkSize<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">number</span><span class="tsd-signature-symbol">; </span>desiredPrice<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Bigish</span><span class="tsd-signature-symbol">; </span>desiredVolume<span class="tsd-signature-symbol">?: </span><a href="Semibook.html" class="tsd-signature-type" data-tsd-kind="Namespace">Semibook</a><span class="tsd-signature-symbol">.</span><a href="Semibook.html#VolumeParams" class="tsd-signature-type" data-tsd-kind="Type alias">VolumeParams</a><span class="tsd-signature-symbol"> }</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/mangrovedao/mangrove/blob/b39f9c2/packages/mangrove.js/src/semibook.ts#L44">src/semibook.ts:44</a></li></ul></aside><div class="tsd-comment tsd-typography"><div class="lead">
<p>Options that control how the book cache behaves.</p>
</div><div><p><code>maxOffers</code> and <code>desiredPrice</code> are mutually exclusive.
If none of these are specfied, the default is <code>maxOffers</code> = <code>Semibook.DEFAULT_MAX_OFFERS</code>.</p>
</div></div><div class="tsd-type-declaration"><h4>Type declaration</h4><ul class="tsd-parameters"><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> max<wbr/>Offers<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">number</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The maximum number of offers to store in the cache.</p>
</div><div><p><code>maxOffers</code> and <code>desiredPrice</code> are mutually exclusive.</p>
</div></div></li><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> chunk<wbr/>Size<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">number</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The number of offers to fetch in one call.</p>
</div><div><p>Defaults to <code>maxOffers</code> if it is set and positive; Otherwise <code>Semibook.DEFAULT_MAX_OFFERS</code> is used.</p>
</div></div></li><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> desired<wbr/>Price<span class="tsd-signature-symbol">?: </span><span class="tsd-signature-type">Bigish</span></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The price that is expected to be used in calls to the market.
The cache will initially contain all offers with this price or better.
This can be useful in order to ensure a good pivot is readily available.</p>
</div></div></li><li class="tsd-parameter"><h5><span class="tsd-flag ts-flagOptional">Optional</span> desired<wbr/>Volume<span class="tsd-signature-symbol">?: </span><a href="Semibook.html" class="tsd-signature-type" data-tsd-kind="Namespace">Semibook</a><span class="tsd-signature-symbol">.</span><a href="Semibook.html#VolumeParams" class="tsd-signature-type" data-tsd-kind="Type alias">VolumeParams</a></h5><div class="tsd-comment tsd-typography"><div class="lead">
<p>The volume that is expected to be used in trades on the market.</p>
</div></div></li></ul></div></section></section></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class=""><a href="../modules.html">Exports</a></li><li class="label tsd-is-external"><span>Internals</span></li><li class=" tsd-kind-namespace"><a href="eth.html">eth</a></li><li class=" tsd-kind-namespace"><a href="LiquidityProvider.html">Liquidity<wbr/>Provider</a></li><li class=" tsd-kind-namespace"><a href="Mangrove.html">Mangrove</a></li><li class=" tsd-kind-namespace"><a href="Market.html">Market</a></li><li class="current tsd-kind-namespace"><a href="Semibook.html">Semibook</a></li><li class="label tsd-is-external"><span>Externals</span></li><li class=" tsd-kind-namespace tsd-is-external"><a href="ethers.html">ethers</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-type-alias tsd-parent-kind-namespace"><a href="Semibook.html#Event" class="tsd-kind-icon">Event</a></li><li class="tsd-kind-type-alias tsd-parent-kind-namespace"><a href="Semibook.html#EventListener" class="tsd-kind-icon">Event<wbr/>Listener</a></li><li class="tsd-kind-type-alias tsd-parent-kind-namespace"><a href="Semibook.html#BlockListener" class="tsd-kind-icon">Block<wbr/>Listener</a></li><li class="tsd-kind-type-alias tsd-parent-kind-namespace"><a href="Semibook.html#VolumeParams" class="tsd-kind-icon">Volume<wbr/>Params</a></li><li class="tsd-kind-type-alias tsd-parent-kind-namespace"><a href="Semibook.html#Options" class="tsd-kind-icon">Options</a></li><li class="tsd-kind-interface tsd-parent-kind-namespace"><a href="../interfaces/Semibook.CacheIterator.html" class="tsd-kind-icon">Cache<wbr/>Iterator</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li><li class="tsd-kind-property tsd-parent-kind-class"><span class="tsd-kind-icon">Property</span></li><li class="tsd-kind-method tsd-parent-kind-class"><span class="tsd-kind-icon">Method</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static property</span></li><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="../assets/main.js"></script></body></html>